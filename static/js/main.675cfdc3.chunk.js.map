{"version":3,"sources":["assets/clip-icon.svg","firebase-config/firebase.js","contexts/auth/AuthContext.js","contexts/user/UserContext.js","contexts/user/userReducer.js","contexts/types.js","contexts/user/UserState.js","components/auth/sign-in/SignIn.js","components/auth/sign-in/SignInContainer.js","components/auth/sign-up/SignUp.js","components/auth/sign-up/SignUpContainer.js","components/loaders/AppLoader.js","components/ProtectedRoute.js","components/users/UserItem.js","components/users/Users.js","components/loaders/ComponentLoader.js","components/chat/ChatForm.js","components/chat/files-uploader/FilesPreview.js","components/chat/files-uploader/FilesUploader.js","components/chat/ChatMessages.js","components/chat/WelcomeScreen.js","components/chat/Chat.js","components/home/Home.js","components/navbar/Navbar.js","components/App.js","contexts/auth/authReducer.js","contexts/auth/AuthState.js","index.js"],"names":["module","exports","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","storage","AuthContext","createContext","UserContext","state","type","payload","loading","users","chatMessages","UserState","currentUser","children","user","useContext","uid","useReducer","userReducer","filesUploadProgress","dispatch","chatId","sender","reciever","getUsers","a","collection","onSnapshot","data","usersExceptCurrentUser","docs","map","doc","filter","item","console","log","getChat","orderBy","snap","messages","sendMessage","message","id","messagesRef","add","author","date","Date","now","uuid","res","update","Provider","value","clearChat","sendFiles","files","storageRef","ref","file","child","put","then","getDownloadURL","url","split","fileName","name","SignIn","formData","handleChange","handleSubmit","authWithGoogle","email","password","className","onSubmit","htmlFor","placeholder","onChange","required","onClick","to","SignInContainer","authContext","signIn","isAuthenticated","useState","setFormData","e","target","preventDefault","SignUp","confirmPassword","SignUpContainer","signUp","AppLoader","color","height","width","ProtectedRoute","Component","component","rest","render","props","UserItem","displayName","photoURL","online","active","style","background","Users","setSecondUser","secondUser","key","ComponentLoader","ChatForm","setShowOverlay","setShowDragDrop","setMessage","src","clipIcon","alt","FilesPreview","open","handlePreviewClose","filesUrls","handleSend","FilesUploader","showOverlay","showDragDrop","setFiles","filesPrevUrls","setFilesPrevUrls","showPreview","setShowPreview","handleOverlayClose","stopPropagation","onDrop","useCallback","acceptedFiles","forEach","reader","FileReader","onabort","onerror","onload","path","result","isImage","prev","readAsDataURL","useDropzone","getRootProps","getInputProps","isDragActive","setOpen","ChatMessages","msg","dateString","toString","slice","join","href","rel","WelcomeScreen","Chat","useEffect","chatRoom","document","getElementById","scrollTo","scrollHeight","length","Home","userContext","Navbar","firstName","signOut","splice","App","authStateChangeHandler","exact","AuthState","authReducer","DEFAULT_IMAGE_URL","auth","createUserWithEmailAndPassword","set","signInWithEmailAndPassword","provider","GoogleAuthProvider","signInWithPopup","onAuthStateChanged","get","ReactDOM"],"mappings":"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","file":"static/js/main.675cfdc3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/clip-icon.632bf4bd.svg\";","import * as firebase from 'firebase';\nimport 'firebase/firestore';\nimport 'firebase/storage';\n\nconst config = {\n  apiKey: 'AIzaSyDaynlhqbPi0HtenabQpGpw26omZ-hGS6c',\n  authDomain: 'chat-c063c.firebaseapp.com',\n  databaseURL: 'https://chat-c063c.firebaseio.com',\n  projectId: 'chat-c063c',\n  storageBucket: 'chat-c063c.appspot.com',\n  messagingSenderId: '41906657985',\n  appId: '1:41906657985:web:183aa5f249c45f47a65240',\n};\n\nfirebase.initializeApp(config);\n\nconst db = firebase.firestore();\nconst storage = firebase.storage();\n\nexport { firebase, db, storage };\n","import { createContext } from 'react';\n\nconst AuthContext = createContext();\n\nexport default AuthContext;\n","import { createContext } from 'react';\n\nconst UserContext = createContext();\n\nexport default UserContext;\n","import {\n  SET_USERS,\n  SET_CHAT_MESSAGES,\n  CLEAR_CHAT_MESSAGES,\n  SET_LOADING,\n} from 'contexts/types';\n\nexport default (state, { type, payload }) => {\n  switch (type) {\n    case SET_LOADING:\n      return {\n        ...state,\n        loading: true,\n      };\n    case SET_USERS:\n      return {\n        ...state,\n        users: payload,\n        loading: false,\n      };\n    case SET_CHAT_MESSAGES:\n      return {\n        ...state,\n        chatMessages: payload,\n        loading: false,\n      };\n    case CLEAR_CHAT_MESSAGES:\n      return {\n        ...state,\n        chatMessages: [],\n        loading: false,\n      };\n    default:\n      return state;\n  }\n};\n","export const AUTH_ERROR = 'AUTH_ERROR';\nexport const AUTH_SUCCESS = 'AUTH_SUCCESS';\nexport const SIGNOUT = 'SIGNOUT';\n\nexport const SET_USERS = 'SET_USERS';\nexport const SET_LOADING = 'SET_LOADING';\nexport const SET_CHAT_MESSAGES = 'SET_CHAT_MESSAGES';\nexport const CLEAR_CHAT_MESSAGES = 'CLEAR_CHAT_MESSAGES';\n","import React, { useReducer, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { v4 as uuid } from 'uuid';\n\nimport {\n  SET_USERS,\n  SET_CHAT_MESSAGES,\n  CLEAR_CHAT_MESSAGES,\n  SET_LOADING,\n} from 'contexts/types';\nimport { db, storage } from 'firebase-config/firebase';\nimport AuthContext from 'contexts/auth/AuthContext';\nimport UserContext from './UserContext';\nimport userReducer from './userReducer';\n\nconst UserState = ({ children }) => {\n  const authContext = useContext(AuthContext);\n  const { user } = authContext;\n  let currentUser;\n  if (user) currentUser = user.uid;\n\n  const initialState = {\n    users: [],\n    filesUploadProgress: null,\n    loading: true,\n    chatMessages: [],\n  };\n\n  const [state, dispatch] = useReducer(userReducer, initialState);\n\n  const chatId = (sender, reciever) => {\n    return sender < reciever ? sender + reciever : reciever + sender;\n  };\n\n  const getUsers = async () => {\n    try {\n      await db.collection('users').onSnapshot((data) => {\n        const users = data.docs.map((doc) => doc.data());\n\n        const usersExceptCurrentUser = users.filter(\n          (item) => item.uid !== currentUser,\n        );\n\n        dispatch({ type: SET_USERS, payload: usersExceptCurrentUser });\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const getChat = async (reciever) => {\n    dispatch({ type: SET_LOADING, payload: true });\n    try {\n      await db\n        .collection('chats')\n        .doc(chatId(currentUser, reciever))\n        .collection('messages')\n        .orderBy('date')\n        .onSnapshot((snap) => {\n          const messages = snap.docs.map((doc) => doc.data());\n\n          dispatch({ type: SET_CHAT_MESSAGES, payload: messages });\n        });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const clearChat = () => dispatch({ type: CLEAR_CHAT_MESSAGES });\n\n  const sendMessage = async (reciever, message) => {\n    const id = chatId(currentUser, reciever);\n    const messagesRef = db\n      .collection('chats')\n      .doc(id)\n      .collection('messages');\n\n    try {\n      const res = await messagesRef.add({\n        message,\n        author: currentUser,\n        date: Date.now(),\n        uid: uuid(),\n      });\n\n      if (res.id) await messagesRef.doc(res.id).update({ uid: res.id });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const sendFiles = (reciever, files) => {\n    const storageRef = storage.ref('files');\n\n    files.map(async (file) => {\n      const id = uuid();\n\n      try {\n        await storageRef\n          .child(id)\n          .put(file)\n          .then(() => {\n            storageRef\n              .child(id)\n              .getDownloadURL()\n              .then((url) => {\n                if (file.type.split('/')[0] === 'image') {\n                  sendMessage(reciever, {\n                    type: 'image',\n                    fileName: file.name,\n                    url,\n                  });\n                } else {\n                  sendMessage(reciever, {\n                    type: 'document',\n                    fileName: file.name,\n                    url,\n                  });\n                }\n              });\n          });\n\n        // .on('state_changed', (snap) => {\n        //   const progress = (snap.bytesTransferred / snap.totalBytes) * 100;\n\n        //   dispatch({ type: SET_FILES_UPLOAD_PROGRESS, payload: progress });\n\n        //   if (progress === 100) {\n        //     storageRef\n        //       .child(id)\n        //       .getDownloadURL()\n        //       .then((url) => {\n        //         if (file.type.split('/')[0] === 'image') {\n        //           sendMessage(reciever, {\n        //             type: 'image',\n        //             fileName: file.name,\n        //             url,\n        //           });\n        //         } else {\n        //           sendMessage(reciever, {\n        //             type: 'document',\n        //             fileName: file.name,\n        //             url,\n        //           });\n        //         }\n        //       });\n        //   }\n        // });\n      } catch (err) {\n        console.log(err);\n      }\n    });\n  };\n\n  return (\n    <UserContext.Provider\n      value={{\n        users: state.users,\n        messages: state.chatMessages,\n        loading: state.loading,\n        getUsers,\n        sendMessage,\n        getChat,\n        clearChat,\n        sendFiles,\n      }}\n    >\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nUserState.propTypes = {\n  children: PropTypes.element.isRequired,\n};\n\nexport default UserState;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\n\nconst SignIn = ({ formData, handleChange, handleSubmit, authWithGoogle }) => {\n  const { email, password } = formData;\n\n  return (\n    <div className=\"w-full max-w-xs mx-auto mt-8 shadow-2xl rounded px-8 pt-6 pb-8\">\n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-4\">\n          <label\n            className=\"block text-gray-700 text-sm font-bold mb-2\"\n            htmlFor=\"email\"\n          >\n            Email\n            <input\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              id=\"email\"\n              name=\"email\"\n              type=\"text\"\n              placeholder=\"Email\"\n              onChange={handleChange}\n              value={email}\n              required\n            />\n          </label>\n        </div>\n        <div className=\"mb-4\">\n          <label\n            className=\"block text-gray-700 text-sm font-bold mb-2\"\n            htmlFor=\"password\"\n          >\n            Password\n            <input\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\"\n              id=\"password\"\n              name=\"password\"\n              type=\"password\"\n              placeholder=\"Password\"\n              onChange={handleChange}\n              value={password}\n              required\n            />\n          </label>\n        </div>\n        <button\n          className=\"bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full\"\n          type=\"submit\"\n        >\n          Sign In\n        </button>\n      </form>\n      <div className=\"text-center my-2\">or</div>\n      <button\n        type=\"button\"\n        className=\"bg-red-500 hover:bg-red-600 px-3 py-2 text-white rounded w-full\"\n        onClick={authWithGoogle}\n      >\n        Sign In With Google\n      </button>\n      <div className=\"text-gray mt-6\">\n        New User ?{' '}\n        <Link to=\"/signup\" className=\"text-blue-700\">\n          Sign Up\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nSignIn.propTypes = {\n  formData: PropTypes.exact({\n    email: PropTypes.string.isRequired,\n    password: PropTypes.string.isRequired,\n  }).isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n  authWithGoogle: PropTypes.func.isRequired,\n};\n\nexport default SignIn;\n","import React, { useState, useContext } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport AuthContext from 'contexts/auth/AuthContext';\nimport SignIn from './SignIn';\n\nconst SignInContainer = () => {\n  const authContext = useContext(AuthContext);\n  const { signIn, authWithGoogle, isAuthenticated } = authContext;\n\n  const [formData, setFormData] = useState({\n    email: 'jd@gmail.com',\n    password: '123123',\n  });\n\n  if (isAuthenticated) return <Redirect to=\"/\" />;\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    signIn(formData);\n  };\n\n  return (\n    <SignIn\n      formData={formData}\n      handleChange={handleChange}\n      handleSubmit={handleSubmit}\n      authWithGoogle={authWithGoogle}\n    />\n  );\n};\n\nexport default SignInContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\n\nconst SignUp = ({ formData, handleChange, handleSubmit, authWithGoogle }) => {\n  const { name, email, password, confirmPassword } = formData;\n\n  return (\n    <div className=\"w-full max-w-xs mx-auto mt-8 shadow-2xl rounded px-8 pt-6 pb-8\">\n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-4\">\n          <label\n            className=\"block text-gray-700 text-sm font-bold mb-2\"\n            htmlFor=\"name\"\n          >\n            Name\n            <input\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              id=\"name\"\n              name=\"name\"\n              type=\"text\"\n              placeholder=\"Name\"\n              onChange={handleChange}\n              value={name}\n              required\n            />\n          </label>\n        </div>\n\n        <div className=\"mb-4\">\n          <label\n            className=\"block text-gray-700 text-sm font-bold mb-2\"\n            htmlFor=\"email\"\n          >\n            Email\n            <input\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              id=\"email\"\n              name=\"email\"\n              type=\"text\"\n              placeholder=\"Email\"\n              onChange={handleChange}\n              value={email}\n              required\n            />\n          </label>\n        </div>\n\n        <div className=\"mb-4\">\n          <label\n            className=\"block text-gray-700 text-sm font-bold mb-2\"\n            htmlFor=\"password\"\n          >\n            Password\n            <input\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              id=\"password\"\n              name=\"password\"\n              type=\"password\"\n              placeholder=\"Password\"\n              onChange={handleChange}\n              value={password}\n              required\n            />\n          </label>\n        </div>\n\n        <div className=\"mb-4\">\n          <label\n            className=\"block text-gray-700 text-sm font-bold mb-2\"\n            htmlFor=\"confirmPassword\"\n          >\n            Confirm Password\n            <input\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              id=\"confirmPassword\"\n              name=\"confirmPassword\"\n              type=\"password\"\n              placeholder=\"Confirm Password\"\n              onChange={handleChange}\n              value={confirmPassword}\n              required\n            />\n          </label>\n        </div>\n\n        <button\n          className=\"bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full\"\n          type=\"submit\"\n        >\n          Sign Up\n        </button>\n      </form>\n      <div className=\"text-center my-2\">or</div>\n      <button\n        type=\"button\"\n        className=\"bg-red-500 hover:bg-red-600 px-3 py-2 text-white rounded w-full\"\n        onClick={authWithGoogle}\n      >\n        Sign Up With Google\n      </button>\n      <div className=\"text-gray mt-6\">\n        Already have an account ?{' '}\n        <Link to=\"/signin\" className=\"text-blue-700\">\n          Sign In\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nSignUp.propTypes = {\n  formData: PropTypes.exact({\n    name: PropTypes.string.isRequired,\n    email: PropTypes.string.isRequired,\n    password: PropTypes.string.isRequired,\n    confirmPassword: PropTypes.string.isRequired,\n  }).isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n  authWithGoogle: PropTypes.func.isRequired,\n};\n\nexport default SignUp;\n","import React, { useState, useContext } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport AuthContext from 'contexts/auth/AuthContext';\nimport SignUp from './SignUp';\n\nconst SignUpContainer = () => {\n  const authContext = useContext(AuthContext);\n  const { signUp, isAuthenticated, authWithGoogle } = authContext;\n\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n  });\n  const { name, email, password } = formData;\n\n  if (isAuthenticated) return <Redirect to=\"/\" />;\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    signUp({ name, email, password });\n  };\n\n  return (\n    <SignUp\n      formData={formData}\n      handleChange={handleChange}\n      handleSubmit={handleSubmit}\n      authWithGoogle={authWithGoogle}\n    />\n  );\n};\n\nexport default SignUpContainer;\n","import React from 'react';\nimport Loader from 'react-loader-spinner';\n\nconst AppLoader = () => (\n  <div className=\"fixed top-0 left-0 right-0 bottom-0 flex justify-center items-center\">\n    <Loader type=\"Grid\" color=\"#667eea\" height={100} width={100} />\n  </div>\n);\n\nexport default AppLoader;\n","import React, { useContext } from 'react';\n\nimport { Route, Redirect } from 'react-router-dom';\nimport AuthContext from 'contexts/auth/AuthContext';\n\nconst ProtectedRoute = ({ component: Component, ...rest }) => {\n  const authContext = useContext(AuthContext);\n  const { isAuthenticated, loading } = authContext;\n\n  if (!isAuthenticated && !loading) return <Redirect to=\"/signin\" />;\n  // eslint-disable-next-line\n  return <Route {...rest} render={(props) => <Component {...props} />} />;\n};\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst UserItem = ({ displayName, photoURL, online, active }) => {\n  return (\n    <div\n      className={`flex my-2 p-2 h-20 hover:bg-indigo-100 ${active &&\n        'bg-gray-200'}`}\n    >\n      <div className=\"relative\">\n        <div\n          className=\"w-16 h-16 rounded-full\"\n          style={{ background: `url(${photoURL}) center center / cover` }}\n        />\n        {online && (\n          <div className=\"absolute bg-green-400 w-4 h-4 right-0 top-0 rounded-full\" />\n        )}\n      </div>\n      <div className=\"flex p-2 ml-2\">\n        <h1>{displayName}</h1>\n      </div>\n    </div>\n  );\n};\n\nUserItem.propTypes = {\n  displayName: PropTypes.string.isRequired,\n  photoURL: PropTypes.string.isRequired,\n  online: PropTypes.bool.isRequired,\n  active: PropTypes.bool.isRequired,\n};\n\nexport default UserItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport UserItem from './UserItem';\n\nconst Users = ({ users, setSecondUser, secondUser }) => {\n  const render = users.map((user) => {\n    return (\n      <div\n        key={user.uid}\n        className=\"cursor-pointer\"\n        onClick={() => setSecondUser(user.uid)}\n      >\n        <UserItem {...user} active={user.uid === secondUser} />\n      </div>\n    );\n  });\n  return (\n    <div className=\"absolute left-0 top-0 bottom-0 max-w-xs w-64 bg-indigo-200 overflow-y-scroll\">\n      {render}\n    </div>\n  );\n};\n\nUsers.propTypes = {\n  users: PropTypes.arrayOf(PropTypes.object).isRequired,\n  setSecondUser: PropTypes.func.isRequired,\n  secondUser: PropTypes.string,\n};\n\nexport default Users;\n","import React from 'react';\nimport Loader from 'react-loader-spinner';\n\nconst ComponentLoader = () => (\n  <div className=\"absolute top-0 left-0 right-0 bottom-0 flex justify-center items-center\">\n    <Loader type=\"TailSpin\" color=\"#667eea\" />\n  </div>\n);\n\nexport default ComponentLoader;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport clipIcon from 'assets/clip-icon.svg';\n\nconst ChatForm = ({\n  sendMessage,\n  secondUser,\n  setShowOverlay,\n  setShowDragDrop,\n}) => {\n  const [message, setMessage] = useState('');\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    sendMessage(secondUser, message);\n    setMessage('');\n  };\n\n  const handleAttachClick = () => {\n    setShowOverlay(true);\n    setShowDragDrop(true);\n  };\n\n  return (\n    <div className=\"sticky bg-indigo-100 bottom-0 left-0 right-0 mt-auto w-full py-6 px-8 flex\">\n      <div\n        className=\"w-8 flex items-center cursor-pointer mr-3\"\n        onClick={handleAttachClick}\n      >\n        <img src={clipIcon} alt=\"attachments\" />\n      </div>\n      <form className=\"flex flex-grow\" onSubmit={handleSubmit}>\n        <input\n          className=\"flex-grow bg-white px-2\"\n          type=\"text\"\n          placeholder=\"Start typing\"\n          onChange={(e) => setMessage(e.target.value)}\n          value={message}\n          required\n        />\n        <button\n          className=\"bg-indigo-500 hover:bg-indigo-600 rounded w-20 text-white py-2\"\n          type=\"submit\"\n        >\n          Send\n        </button>\n      </form>\n    </div>\n  );\n};\n\nChatForm.propTypes = {\n  sendMessage: PropTypes.func.isRequired,\n  secondUser: PropTypes.string,\n  setShowOverlay: PropTypes.func.isRequired,\n  setShowDragDrop: PropTypes.func.isRequired,\n};\n\nexport default ChatForm;\n","import React from 'react';\n\nconst FilesPreview = ({ open, handlePreviewClose, filesUrls, handleSend }) => {\n  if (!open) return null;\n\n  return (\n    <div className=\"bg-pink-100 px-8 z-30 w-full text-center py-6 relative max-w-screen-xl\">\n      <span\n        className=\"absolute top-0 right-16 text-red-600 cursor-pointer\"\n        onClick={handlePreviewClose}\n      >\n        Close\n      </span>\n      <div className=\"flex overflow-x-scroll\">\n        {filesUrls.map(({ type, url, name }) => {\n          if (type === 'image') {\n            return <img className=\"w-32 my-3 mx-4\" src={url} alt={name} />;\n          } else {\n            return (\n              <div className=\"w-32 my-3 mx-4 flex justify-center items-center\">\n                {name}\n              </div>\n            );\n          }\n        })}\n      </div>\n\n      <button\n        onClick={handleSend}\n        type=\"button\"\n        className=\"bg-indigo-500 hover:bg-indigo-600 py-2 px-4 mt-3 text-bold text-white rounded\"\n      >\n        SEND\n      </button>\n    </div>\n  );\n};\n\nexport default FilesPreview;\n","import React, { useCallback, useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDropzone } from 'react-dropzone';\n\nimport UserContext from 'contexts/user/UserContext';\nimport FilesPreview from './FilesPreview';\n\nconst FilesUploader = ({\n  secondUser,\n  showOverlay,\n  showDragDrop,\n  setShowOverlay,\n  setShowDragDrop,\n}) => {\n  const userContext = useContext(UserContext);\n  const { sendFiles } = userContext;\n\n  const [files, setFiles] = useState([]);\n  const [filesPrevUrls, setFilesPrevUrls] = useState([]);\n  const [showPreview, setShowPreview] = useState(false);\n\n  const handleSend = () => {\n    sendFiles(secondUser, files);\n    setShowPreview(false);\n    setShowOverlay(false);\n    setFiles([]);\n    setFilesPrevUrls([]);\n  };\n\n  const handleOverlayClose = (e) => {\n    e.stopPropagation();\n    setFiles([]);\n    setFilesPrevUrls([]);\n    setShowPreview(false);\n    setShowOverlay(false);\n    setShowDragDrop(false);\n  };\n\n  const onDrop = useCallback((acceptedFiles) => {\n    setShowDragDrop(false);\n    setFiles(acceptedFiles);\n\n    acceptedFiles.forEach((file) => {\n      const reader = new FileReader();\n\n      reader.onabort = () => console.log('file reading was aborted');\n      reader.onerror = () => console.log('file reading has failed');\n      reader.onload = () => {\n        const path = reader.result;\n        const isImage = file.type.split('/')[0] === 'image';\n\n        setFilesPrevUrls((prev) => [\n          ...prev,\n          { type: isImage ? 'image' : 'document', url: path, name: file.name },\n        ]);\n      };\n      reader.readAsDataURL(file);\n      setShowPreview(true);\n    });\n  }, []);\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\n\n  if (!showOverlay) return null;\n\n  return (\n    <div className=\"fixed right-0 bottom-0 left-0 top-0 flex justify-center items-center h-screen\">\n      {showOverlay && (\n        <div className=\"absolute w-full h-full bg-gray-200 opacity-50 z-10\" />\n      )}\n      {showDragDrop && (\n        <div\n          className=\"absolute top-0 right-0 bottom-0 left-0 flex justify-center items-center w-full h-full z-20\"\n          {...getRootProps()}\n        >\n          <input {...getInputProps()} />\n          {isDragActive ? (\n            <p>Drop the files here ...</p>\n          ) : (\n            <div className=\"bg-gray-400 rounded-full w-56 h-56 flex cursor-pointer justify-center items-center text-center relative\">\n              <p>Drag 'n' drop some files here, or click to select files</p>\n              <span\n                className=\"absolute right-0 top-0 z-30 cursor-pointer\"\n                onClick={handleOverlayClose}\n              >\n                Close\n              </span>\n            </div>\n          )}\n        </div>\n      )}\n      <FilesPreview\n        open={showPreview}\n        setOpen={setShowPreview}\n        filesUrls={filesPrevUrls}\n        handleSend={handleSend}\n        handlePreviewClose={handleOverlayClose}\n      />\n    </div>\n  );\n};\n\nFilesUploader.propTypes = {\n  secondUser: PropTypes.string,\n  showOverlay: PropTypes.bool.isRequired,\n  showDragDrop: PropTypes.bool.isRequired,\n  setShowOverlay: PropTypes.func.isRequired,\n  setShowDragDrop: PropTypes.func.isRequired,\n};\n\nexport default FilesUploader;\n","import React from 'react';\n\nconst ChatMessages = ({ messages, secondUser }) => {\n  const renderMessages = messages.map(({ message: msg, author, date, uid }) => {\n    const dateString = new Date(date)\n      .toString()\n      .split(' ')\n      .slice(1, 5)\n      .join(' ');\n\n    if (typeof msg === 'object') {\n      const { fileName, url } = msg;\n\n      if (msg.type === 'image') {\n        return (\n          <div\n            className={`mb-2 ${author === secondUser ? 'mr-auto' : 'ml-auto'}`}\n            style={{ width: 'max-content' }}\n            key={uid}\n          >\n            <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n              <img src={url} alt={fileName} className=\"w-32\" />\n            </a>\n            <div\n              className={`text-gray-500 text-xs ${\n                author === secondUser ? 'text-left' : 'text-right'\n              }`}\n            >\n              {dateString}\n            </div>\n          </div>\n        );\n      }\n\n      if (msg.type === 'document') {\n        return (\n          <div\n            className={` mb-2 ${author === secondUser ? 'mr-auto' : 'ml-auto'}`}\n            key={uid}\n            style={{ width: 'max-content' }}\n          >\n            <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n              <div className=\"p-2 bg-green-200\">\n                {fileName}\n                <div className=\"text-indigo-400 text-xs mt-2\">\n                  Document: Click to open\n                </div>\n              </div>\n            </a>\n            <div\n              className={`text-gray-500 text-xs ${\n                author === secondUser ? 'text-right' : 'text-left'\n              }`}\n            >\n              {dateString}\n            </div>\n          </div>\n        );\n      }\n    } else {\n      return (\n        <div className=\"mb-2\" key={uid}>\n          <p\n            className={`bg-green-200 px-2 py-1 rounded break-words max-w-md ${\n              author === secondUser ? 'mr-auto' : 'ml-auto'\n            }`}\n            style={{ width: 'max-content' }}\n          >\n            {msg}\n          </p>\n          <div\n            className={`text-gray-500 text-xs ${\n              author === secondUser ? 'text-left' : 'text-right'\n            }`}\n          >\n            {dateString}\n          </div>\n        </div>\n      );\n    }\n  });\n\n  return renderMessages;\n};\n\nexport default ChatMessages;\n","import React, { useContext } from 'react';\n\nimport AuthContext from 'contexts/auth/AuthContext';\n\nconst WelcomeScreen = () => {\n  const authContext = useContext(AuthContext);\n  const {\n    user: { photoURL, displayName },\n  } = authContext;\n\n  return (\n    <div className=\"absolute top-0 bottom-0 right-0 left-64 bg-indigo-100 p-8 flex flex-col flex-grow justify-center\">\n      <div\n        className=\"rounded-full w-32 h-32 mx-auto mb-8\"\n        style={{ background: `url(${photoURL}) center center / cover` }}\n      />\n      <h1 className=\"text-center\">Welcome {displayName}</h1>\n    </div>\n  );\n};\n\nexport default WelcomeScreen;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport ComponentLoader from 'components/loaders/ComponentLoader';\nimport ChatForm from './ChatForm';\nimport FilesUploader from './files-uploader/FilesUploader';\nimport ChatMessages from './ChatMessages';\nimport WelcomeScreen from './WelcomeScreen';\n\nconst Chat = ({\n  secondUser,\n  sendMessage,\n  getChat,\n  messages,\n  clearChat,\n  loading,\n}) => {\n  const [showOverlay, setShowOverlay] = useState(false);\n  const [showDragDrop, setShowDragDrop] = useState(false);\n\n  useEffect(() => {\n    if (secondUser) getChat(secondUser);\n\n    return () => {\n      clearChat();\n    };\n  }, [secondUser]);\n\n  const chatRoom = document.getElementById('chat-room');\n\n  useEffect(() => {\n    if (chatRoom) chatRoom.scrollTo(0, chatRoom.scrollHeight);\n  }, [messages]);\n\n  if (!secondUser) return <WelcomeScreen />;\n\n  return (\n    <div\n      id=\"chat-room\"\n      className=\"flex-grow bg-indigo-100 absolute top-0 bottom-0 right-0 left-64 px-8 pt-8 overflow-y-scroll flex flex-col\"\n    >\n      {loading && <ComponentLoader />}\n      {messages.length === 0 && !loading ? (\n        <div className=\"text-center text-gray-500\">\n          Send a message to start a conversation\n        </div>\n      ) : (\n        <ChatMessages messages={messages} secondUser={secondUser} />\n      )}\n      <FilesUploader\n        showOverlay={showOverlay}\n        showDragDrop={showDragDrop}\n        setShowDragDrop={setShowDragDrop}\n        setShowOverlay={setShowOverlay}\n        secondUser={secondUser}\n      />\n      <ChatForm\n        setShowOverlay={setShowOverlay}\n        setShowDragDrop={setShowDragDrop}\n        secondUser={secondUser}\n        sendMessage={sendMessage}\n      />\n    </div>\n  );\n};\n\nChat.propTypes = {\n  secondUser: PropTypes.string,\n  messages: PropTypes.arrayOf(PropTypes.object).isRequired,\n  getChat: PropTypes.func.isRequired,\n  sendMessage: PropTypes.func.isRequired,\n  clearChat: PropTypes.func.isRequired,\n  loading: PropTypes.bool.isRequired,\n};\n\nexport default Chat;\n","import React, { useEffect, useContext, useState } from 'react';\n\nimport UserContext from 'contexts/user/UserContext';\nimport Users from 'components/users/Users';\nimport Chat from 'components/chat/Chat';\n\nconst Home = () => {\n  const userContext = useContext(UserContext);\n  const {\n    users,\n    getUsers,\n    sendMessage,\n    messages,\n    getChat,\n    loading,\n    clearChat,\n  } = userContext;\n\n  const [secondUser, setSecondUser] = useState(null);\n\n  useEffect(() => {\n    getUsers();\n  }, []);\n\n  return (\n    <div className=\"relative max-w-screen-xl w-full mx-auto flex flex-grow\">\n      <Users\n        users={users}\n        setSecondUser={setSecondUser}\n        secondUser={secondUser}\n      />\n      <Chat\n        secondUser={secondUser}\n        sendMessage={sendMessage}\n        getChat={getChat}\n        messages={messages}\n        clearChat={clearChat}\n        loading={loading}\n      />\n    </div>\n  );\n};\n\nexport default Home;\n","import React, { useContext } from 'react';\n\nimport AuthContext from 'contexts/auth/AuthContext';\nimport { Link } from 'react-router-dom';\n\nconst Navbar = () => {\n  const authContext = useContext(AuthContext);\n  const { signOut, isAuthenticated, user } = authContext;\n\n  let firstName;\n  if (user) {\n    firstName = user.displayName.split(' ').splice(0, 1);\n  }\n\n  return (\n    <div className=\"bg-indigo-500 h-16\">\n      <div className=\" max-w-screen-xl mx-auto px-8 h-full flex justify-between items-center\">\n        <div className=\"flex items-center text-white \">\n          <Link className=\"text-2xl font-bold\" to=\"/\">\n            CHAT\n          </Link>\n          <div className=\"ml-3\">Hi {firstName}</div>\n        </div>\n        {isAuthenticated && (\n          <button\n            type=\"button\"\n            className=\"bg-white px-3 py-1 rounded \"\n            onClick={signOut}\n          >\n            Sign Out\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Navbar;\n","import React, { useContext, useEffect } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport UserState from 'contexts/user/UserState';\nimport AuthContext from 'contexts/auth/AuthContext';\nimport SignInContainer from 'components/auth/sign-in/SignInContainer';\nimport SignUpContainer from 'components/auth/sign-up/SignUpContainer';\nimport AppLoader from 'components/loaders/AppLoader';\nimport ProtectedRoute from './ProtectedRoute';\nimport Home from './home/Home';\nimport Navbar from './navbar/Navbar';\n\nconst App = () => {\n  const authContext = useContext(AuthContext);\n  const { authStateChangeHandler, loading } = authContext;\n\n  useEffect(() => {\n    authStateChangeHandler();\n  }, []);\n\n  if (loading) return <AppLoader />;\n\n  return (\n    <div className=\"flex flex-col h-screen max-h-screen overflow-hidden\">\n      <UserState>\n        <Router>\n          <Navbar />\n          <Switch>\n            <Route exact path=\"/signin\" component={SignInContainer} />\n            <Route exact path=\"/signup\" component={SignUpContainer} />\n            <ProtectedRoute exact path=\"/\" component={Home} />\n          </Switch>\n        </Router>\n      </UserState>\n    </div>\n  );\n};\n\nexport default App;\n","import { AUTH_ERROR, AUTH_SUCCESS, SIGNOUT } from 'contexts/types';\n\nexport default (state, { type, payload }) => {\n  switch (type) {\n    case SIGNOUT:\n    case AUTH_ERROR:\n      return {\n        ...state,\n        loading: false,\n        isAuthenticated: false,\n        user: null,\n      };\n    case AUTH_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n        isAuthenticated: true,\n        user: payload,\n      };\n    default:\n      return state;\n  }\n};\n","import React, { useReducer } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { AUTH_ERROR, AUTH_SUCCESS, SIGNOUT } from 'contexts/types';\nimport { firebase, db } from 'firebase-config/firebase';\nimport authReducer from './authReducer';\nimport AuthContext from './AuthContext';\n\nconst AuthState = ({ children }) => {\n  const initialState = {\n    isAuthenticated: false,\n    user: null,\n    loading: true,\n  };\n\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  const signUp = async ({ name, email, password }) => {\n    const DEFAULT_IMAGE_URL =\n      'https://firebasestorage.googleapis.com/v0/b/chat-c063c.appspot.com/o/assets%2Fuser.png?alt=media&token=a6fa6d73-3ac4-4e89-ad36-55904f4de284';\n\n    try {\n      const res = await firebase\n        .auth()\n        .createUserWithEmailAndPassword(email, password);\n\n      if (res.user) {\n        db.collection('users')\n          .doc(res.user.uid)\n          .set({\n            displayName: name,\n            photoURL: DEFAULT_IMAGE_URL,\n            email,\n            uid: res.user.uid,\n            online: true,\n          });\n      }\n\n      dispatch({\n        type: AUTH_SUCCESS,\n        payload: {\n          displayName: name,\n          email,\n          photoURL: DEFAULT_IMAGE_URL,\n          uid: res.user.id,\n        },\n      });\n    } catch (err) {\n      dispatch({ type: AUTH_ERROR });\n    }\n  };\n\n  const signIn = async ({ email, password }) => {\n    try {\n      const res = await firebase\n        .auth()\n        .signInWithEmailAndPassword(email, password);\n\n      if (res.user) {\n        db.collection('users')\n          .doc(res.user.uid)\n          .update({\n            online: true,\n          });\n      }\n    } catch (err) {\n      dispatch({ type: AUTH_ERROR });\n    }\n  };\n\n  const authWithGoogle = async () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    try {\n      const res = await firebase.auth().signInWithPopup(provider);\n\n      if (res.user) {\n        db.collection('users')\n          .doc(res.user.uid)\n          .set({\n            displayName: res.user.displayName,\n            photoURL: res.user.photoURL,\n            email: res.user.email,\n            uid: res.user.uid,\n            online: true,\n          });\n      }\n    } catch (err) {\n      dispatch({ type: AUTH_ERROR });\n    }\n  };\n\n  const signOut = async () => {\n    try {\n      await db\n        .collection('users')\n        .doc(state.user.uid)\n        .update({\n          online: false,\n        });\n      firebase.auth().signOut();\n      dispatch({ type: SIGNOUT });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const authStateChangeHandler = () => {\n    firebase.auth().onAuthStateChanged(async (user) => {\n      if (user) {\n        await db\n          .collection('users')\n          .doc(user.uid)\n          .update({\n            online: true,\n          });\n\n        const res = await db\n          .collection('users')\n          .doc(user.uid)\n          .get();\n\n        const { displayName, email, photoURL, uid } = res.data();\n\n        dispatch({\n          type: AUTH_SUCCESS,\n          payload: {\n            displayName,\n            email,\n            photoURL,\n            uid,\n          },\n        });\n      } else {\n        dispatch({ type: AUTH_ERROR });\n      }\n    });\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        isAuthenticated: state.isAuthenticated,\n        user: state.user,\n        loading: state.loading,\n        signIn,\n        signUp,\n        signOut,\n        authWithGoogle,\n        authStateChangeHandler,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nAuthState.propTypes = {\n  children: PropTypes.element.isRequired,\n};\n\nexport default AuthState;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from 'components/App';\nimport AuthState from 'contexts/auth/AuthState';\nimport './styles.css';\n\nReactDOM.render(\n  <AuthState>\n    <App />\n  </AuthState>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}