(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{35:function(e,t,a){e.exports=a.p+"static/media/clip-icon.632bf4bd.svg"},39:function(e,t,a){e.exports=a(85)},84:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),c=a.n(o),s=a(11),l=a(15),i=a(3),u=a.n(i),m=a(12),d=a(4),p=a(89),f=a(19);a(59),a(60);f.initializeApp({apiKey:"AIzaSyDaynlhqbPi0HtenabQpGpw26omZ-hGS6c",authDomain:"chat-c063c.firebaseapp.com",databaseURL:"https://chat-c063c.firebaseio.com",projectId:"chat-c063c",storageBucket:"chat-c063c.appspot.com",messagingSenderId:"41906657985",appId:"1:41906657985:web:183aa5f249c45f47a65240"});var h=f.firestore(),g=f.storage(),b=Object(n.createContext)(),x=Object(n.createContext)(),v=a(9),E=function(e,t){var a=t.type,n=t.payload;switch(a){case"SET_LOADING":return Object(v.a)({},e,{loading:!0});case"SET_USERS":return Object(v.a)({},e,{users:n,loading:!1});case"SET_CHAT_MESSAGES":return Object(v.a)({},e,{chatMessages:n,loading:!1});case"CLEAR_CHAT_MESSAGES":return Object(v.a)({},e,{chatMessages:[],loading:!1});default:return e}},w=function(e){var t,a=e.children,o=Object(n.useContext)(b).user;o&&(t=o.uid);var c=Object(n.useReducer)(E,{users:[],filesUploadProgress:null,loading:!0,chatMessages:[]}),s=Object(d.a)(c,2),l=s[0],i=s[1],f=function(e,t){return e<t?e+t:t+e},v=function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.collection("users").onSnapshot((function(e){var a=e.docs.map((function(e){return e.data()})).filter((function(e){return e.uid!==t}));i({type:"SET_USERS",payload:a})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(m.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:"SET_LOADING",payload:!0}),e.prev=1,e.next=4,h.collection("chats").doc(f(t,a)).collection("messages").orderBy("date").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));i({type:"SET_CHAT_MESSAGES",payload:t})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(m.a)(u.a.mark((function e(a,n){var r,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f(t,a),o=h.collection("chats").doc(r).collection("messages"),e.prev=2,e.next=5,o.add({message:n,author:t,date:Date.now(),uid:Object(p.a)()});case 5:if(!(c=e.sent).id){e.next=9;break}return e.next=9,o.doc(c.id).update({uid:c.id});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(x.Provider,{value:{users:l.users,messages:l.chatMessages,loading:l.loading,getUsers:v,sendMessage:y,getChat:w,clearChat:function(){return i({type:"CLEAR_CHAT_MESSAGES"})},sendFiles:function(e,t){var a=g.ref("files");t.map(function(){var t=Object(m.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(p.a)(),t.prev=1,t.next=4,a.child(r).put(n).then((function(){a.child(r).getDownloadURL().then((function(t){"image"===n.type.split("/")[0]?y(e,{type:"image",fileName:n.name,url:t}):y(e,{type:"document",fileName:n.name,url:t})}))}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}())}}},a)},y=a(17),N=function(e){var t=e.formData,a=e.handleChange,n=e.handleSubmit,o=e.authWithGoogle,c=t.email,l=t.password;return r.a.createElement("div",{className:"w-full max-w-xs mx-auto mt-8 shadow-2xl rounded px-8 pt-6 pb-8"},r.a.createElement("form",{onSubmit:n},r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email"},"Email",r.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",name:"email",type:"text",placeholder:"Email",onChange:a,value:c,required:!0}))),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password"},"Password",r.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",id:"password",name:"password",type:"password",placeholder:"Password",onChange:a,value:l,required:!0}))),r.a.createElement("button",{className:"bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full",type:"submit"},"Sign In")),r.a.createElement("div",{className:"text-center my-2"},"or"),r.a.createElement("button",{type:"button",className:"bg-red-500 hover:bg-red-600 px-3 py-2 text-white rounded w-full",onClick:o},"Sign In With Google"),r.a.createElement("div",{className:"text-gray mt-6"},"New User ?"," ",r.a.createElement(s.b,{to:"/signup",className:"text-blue-700"},"Sign Up")))},O=function(){var e=Object(n.useContext)(b),t=e.signIn,a=e.authWithGoogle,o=e.isAuthenticated,c=Object(n.useState)({email:"jd@gmail.com",password:"123123"}),s=Object(d.a)(c,2),i=s[0],u=s[1];if(o)return r.a.createElement(l.a,{to:"/"});return r.a.createElement(N,{formData:i,handleChange:function(e){u(Object(v.a)({},i,Object(y.a)({},e.target.name,e.target.value)))},handleSubmit:function(e){e.preventDefault(),t(i)},authWithGoogle:a})},S=function(e){var t=e.formData,a=e.handleChange,n=e.handleSubmit,o=e.authWithGoogle,c=t.name,l=t.email,i=t.password,u=t.confirmPassword;return r.a.createElement("div",{className:"w-full max-w-xs mx-auto mt-8 shadow-2xl rounded px-8 pt-6 pb-8"},r.a.createElement("form",{onSubmit:n},r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name"},"Name",r.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"name",name:"name",type:"text",placeholder:"Name",onChange:a,value:c,required:!0}))),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email"},"Email",r.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",name:"email",type:"text",placeholder:"Email",onChange:a,value:l,required:!0}))),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password"},"Password",r.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"password",name:"password",type:"password",placeholder:"Password",onChange:a,value:i,required:!0}))),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"confirmPassword"},"Confirm Password",r.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:"Confirm Password",onChange:a,value:u,required:!0}))),r.a.createElement("button",{className:"bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full",type:"submit"},"Sign Up")),r.a.createElement("div",{className:"text-center my-2"},"or"),r.a.createElement("button",{type:"button",className:"bg-red-500 hover:bg-red-600 px-3 py-2 text-white rounded w-full",onClick:o},"Sign Up With Google"),r.a.createElement("div",{className:"text-gray mt-6"},"Already have an account ?"," ",r.a.createElement(s.b,{to:"/signin",className:"text-blue-700"},"Sign In")))},j=function(){var e=Object(n.useContext)(b),t=e.signUp,a=e.isAuthenticated,o=e.authWithGoogle,c=Object(n.useState)({name:"",email:"",password:"",confirmPassword:""}),s=Object(d.a)(c,2),i=s[0],u=s[1],m=i.name,p=i.email,f=i.password;if(a)return r.a.createElement(l.a,{to:"/"});return r.a.createElement(S,{formData:i,handleChange:function(e){u(Object(v.a)({},i,Object(y.a)({},e.target.name,e.target.value)))},handleSubmit:function(e){e.preventDefault(),t({name:m,email:p,password:f})},authWithGoogle:o})},C=a(22),k=a.n(C),U=function(){return r.a.createElement("div",{className:"fixed top-0 left-0 right-0 bottom-0 flex justify-center items-center"},r.a.createElement(k.a,{type:"Grid",color:"#667eea",height:100,width:100}))},A=a(34),R=function(e){var t=e.component,a=Object(A.a)(e,["component"]),o=Object(n.useContext)(b),c=o.isAuthenticated,s=o.loading;return c||s?r.a.createElement(l.b,Object.assign({},a,{render:function(e){return r.a.createElement(t,e)}})):r.a.createElement(l.a,{to:"/signin"})},D=function(e){var t=e.displayName,a=e.photoURL,n=e.online,o=e.active;return r.a.createElement("div",{className:"flex my-2 p-2 h-20 hover:bg-indigo-100 ".concat(o&&"bg-gray-200")},r.a.createElement("div",{className:"relative"},r.a.createElement("div",{className:"w-16 h-16 rounded-full",style:{background:"url(".concat(a,") center center / cover")}}),n&&r.a.createElement("div",{className:"absolute bg-green-400 w-4 h-4 right-0 top-0 rounded-full"})),r.a.createElement("div",{className:"flex p-2 ml-2"},r.a.createElement("h1",null,t)))},P=function(e){var t=e.users,a=e.setSecondUser,n=e.secondUser,o=t.map((function(e){return r.a.createElement("div",{key:e.uid,className:"cursor-pointer",onClick:function(){return a(e.uid)}},r.a.createElement(D,Object.assign({},e,{active:e.uid===n})))}));return r.a.createElement("div",{className:"absolute left-0 top-0 bottom-0 max-w-xs w-64 bg-indigo-200 overflow-y-scroll"},o)},T=function(){return r.a.createElement("div",{className:"absolute top-0 left-0 right-0 bottom-0 flex justify-center items-center"},r.a.createElement(k.a,{type:"TailSpin",color:"#667eea"}))},_=a(35),G=a.n(_),H=function(e){var t=e.sendMessage,a=e.secondUser,o=e.setShowOverlay,c=e.setShowDragDrop,s=Object(n.useState)(""),l=Object(d.a)(s,2),i=l[0],u=l[1];return r.a.createElement("div",{className:"sticky bg-indigo-100 bottom-0 left-0 right-0 mt-auto w-full py-6 px-8 flex"},r.a.createElement("div",{className:"w-8 flex items-center cursor-pointer mr-3",onClick:function(){o(!0),c(!0)}},r.a.createElement("img",{src:G.a,alt:"attachments"})),r.a.createElement("form",{className:"flex flex-grow",onSubmit:function(e){e.preventDefault(),t(a,i),u("")}},r.a.createElement("input",{className:"flex-grow bg-white px-2",type:"text",placeholder:"Start typing",onChange:function(e){return u(e.target.value)},value:i,required:!0}),r.a.createElement("button",{className:"bg-indigo-500 hover:bg-indigo-600 rounded w-20 text-white py-2",type:"submit"},"Send")))},I=a(38),L=a(37),M=function(e){var t=e.open,a=e.handlePreviewClose,n=e.filesUrls,o=e.handleSend;return t?r.a.createElement("div",{className:"bg-pink-100 px-8 z-30 w-full text-center py-6 relative max-w-screen-xl"},r.a.createElement("span",{className:"absolute top-0 right-16 text-red-600 cursor-pointer",onClick:a},"Close"),r.a.createElement("div",{className:"flex overflow-x-scroll"},n.map((function(e){var t=e.type,a=e.url,n=e.name;return"image"===t?r.a.createElement("img",{className:"w-32 my-3 mx-4",src:a,alt:n}):r.a.createElement("div",{className:"w-32 my-3 mx-4 flex justify-center items-center"},n)}))),r.a.createElement("button",{onClick:o,type:"button",className:"bg-indigo-500 hover:bg-indigo-600 py-2 px-4 mt-3 text-bold text-white rounded"},"SEND")):null},W=function(e){var t=e.secondUser,a=e.showOverlay,o=e.showDragDrop,c=e.setShowOverlay,s=e.setShowDragDrop,l=Object(n.useContext)(x).sendFiles,i=Object(n.useState)([]),u=Object(d.a)(i,2),m=u[0],p=u[1],f=Object(n.useState)([]),h=Object(d.a)(f,2),g=h[0],b=h[1],v=Object(n.useState)(!1),E=Object(d.a)(v,2),w=E[0],y=E[1],N=function(e){e.stopPropagation(),p([]),b([]),y(!1),c(!1),s(!1)},O=Object(n.useCallback)((function(e){s(!1),p(e),e.forEach((function(e){var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=function(){var a=t.result,n="image"===e.type.split("/")[0];b((function(t){return[].concat(Object(I.a)(t),[{type:n?"image":"document",url:a,name:e.name}])}))},t.readAsDataURL(e),y(!0)}))}),[]),S=Object(L.a)({onDrop:O}),j=S.getRootProps,C=S.getInputProps,k=S.isDragActive;return a?r.a.createElement("div",{className:"fixed right-0 bottom-0 left-0 top-0 flex justify-center items-center h-screen"},a&&r.a.createElement("div",{className:"absolute w-full h-full bg-gray-200 opacity-50 z-10"}),o&&r.a.createElement("div",Object.assign({className:"absolute top-0 right-0 bottom-0 left-0 flex justify-center items-center w-full h-full z-20"},j()),r.a.createElement("input",C()),k?r.a.createElement("p",null,"Drop the files here ..."):r.a.createElement("div",{className:"bg-gray-400 rounded-full w-56 h-56 flex cursor-pointer justify-center items-center text-center relative"},r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files"),r.a.createElement("span",{className:"absolute right-0 top-0 z-30 cursor-pointer",onClick:N},"Close"))),r.a.createElement(M,{open:w,setOpen:y,filesUrls:g,handleSend:function(){l(t,m),y(!1),c(!1),p([]),b([])},handlePreviewClose:N})):null},F=function(e){var t=e.messages,a=e.secondUser;return t.map((function(e){var t=e.message,n=e.author,o=e.date,c=e.uid,s=new Date(o).toString().split(" ").slice(1,5).join(" ");if("object"!==typeof t)return r.a.createElement("div",{className:"mb-2",key:c},r.a.createElement("p",{className:"bg-green-200 px-2 py-1 rounded break-words max-w-md ".concat(n===a?"mr-auto":"ml-auto"),style:{width:"max-content"}},t),r.a.createElement("div",{className:"text-gray-500 text-xs ".concat(n===a?"text-left":"text-right")},s));var l=t.fileName,i=t.url;return"image"===t.type?r.a.createElement("div",{className:"mb-2 ".concat(n===a?"mr-auto":"ml-auto"),style:{width:"max-content"},key:c},r.a.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:i,alt:l,className:"w-32"})),r.a.createElement("div",{className:"text-gray-500 text-xs ".concat(n===a?"text-left":"text-right")},s)):"document"===t.type?r.a.createElement("div",{className:" mb-2 ".concat(n===a?"mr-auto":"ml-auto"),key:c,style:{width:"max-content"}},r.a.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("div",{className:"p-2 bg-green-200"},l,r.a.createElement("div",{className:"text-indigo-400 text-xs mt-2"},"Document: Click to open"))),r.a.createElement("div",{className:"text-gray-500 text-xs ".concat(n===a?"text-right":"text-left")},s)):void 0}))},q=function(){var e=Object(n.useContext)(b).user,t=e.photoURL,a=e.displayName;return r.a.createElement("div",{className:"absolute top-0 bottom-0 right-0 left-64 bg-indigo-100 p-8 flex flex-col flex-grow justify-center"},r.a.createElement("div",{className:"rounded-full w-32 h-32 mx-auto mb-8",style:{background:"url(".concat(t,") center center / cover")}}),r.a.createElement("h1",{className:"text-center"},"Welcome ",a))},z=function(e){var t=e.secondUser,a=e.sendMessage,o=e.getChat,c=e.messages,s=e.clearChat,l=e.loading,i=Object(n.useState)(!1),u=Object(d.a)(i,2),m=u[0],p=u[1],f=Object(n.useState)(!1),h=Object(d.a)(f,2),g=h[0],b=h[1];Object(n.useEffect)((function(){return t&&o(t),function(){s()}}),[t]);var x=document.getElementById("chat-room");return Object(n.useEffect)((function(){x&&x.scrollTo(0,x.scrollHeight)}),[c]),t?r.a.createElement("div",{id:"chat-room",className:"flex-grow bg-indigo-100 absolute top-0 bottom-0 right-0 left-64 px-8 pt-8 overflow-y-scroll flex flex-col"},l&&r.a.createElement(T,null),0!==c.length||l?r.a.createElement(F,{messages:c,secondUser:t}):r.a.createElement("div",{className:"text-center text-gray-500"},"Send a message to start a conversation"),r.a.createElement(W,{showOverlay:m,showDragDrop:g,setShowDragDrop:b,setShowOverlay:p,secondUser:t}),r.a.createElement(H,{setShowOverlay:p,setShowDragDrop:b,secondUser:t,sendMessage:a})):r.a.createElement(q,null)},B=function(){var e=Object(n.useContext)(x),t=e.users,a=e.getUsers,o=e.sendMessage,c=e.messages,s=e.getChat,l=e.loading,i=e.clearChat,u=Object(n.useState)(null),m=Object(d.a)(u,2),p=m[0],f=m[1];return Object(n.useEffect)((function(){a()}),[]),r.a.createElement("div",{className:"relative max-w-screen-xl w-full mx-auto flex flex-grow"},r.a.createElement(P,{users:t,setSecondUser:f,secondUser:p}),r.a.createElement(z,{secondUser:p,sendMessage:o,getChat:s,messages:c,clearChat:i,loading:l}))},J=function(){var e,t=Object(n.useContext)(b),a=t.signOut,o=t.isAuthenticated,c=t.user;return c&&(e=c.displayName.split(" ").splice(0,1)),r.a.createElement("div",{className:"bg-indigo-500 h-16"},r.a.createElement("div",{className:" max-w-screen-xl mx-auto px-8 h-full flex justify-between items-center"},r.a.createElement("div",{className:"flex items-center text-white "},r.a.createElement(s.b,{className:"text-2xl font-bold",to:"/"},"CHAT"),r.a.createElement("div",{className:"ml-3"},"Hi ",e)),o&&r.a.createElement("button",{type:"button",className:"bg-white px-3 py-1 rounded ",onClick:a},"Sign Out")))},K=function(){var e=Object(n.useContext)(b),t=e.authStateChangeHandler,a=e.loading;return Object(n.useEffect)((function(){t()}),[]),a?r.a.createElement(U,null):r.a.createElement("div",{className:"flex flex-col h-screen max-h-screen overflow-hidden"},r.a.createElement(w,null,r.a.createElement(s.a,null,r.a.createElement(J,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/signin",component:O}),r.a.createElement(l.b,{exact:!0,path:"/signup",component:j}),r.a.createElement(R,{exact:!0,path:"/",component:B})))))},Q=function(e,t){var a=t.type,n=t.payload;switch(a){case"SIGNOUT":case"AUTH_ERROR":return Object(v.a)({},e,{loading:!1,isAuthenticated:!1,user:null});case"AUTH_SUCCESS":return Object(v.a)({},e,{loading:!1,isAuthenticated:!0,user:n});default:return e}},Z=function(e){var t=e.children,a=Object(n.useReducer)(Q,{isAuthenticated:!1,user:null,loading:!0}),o=Object(d.a)(a,2),c=o[0],s=o[1],l=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.email,r=t.password,o="https://firebasestorage.googleapis.com/v0/b/chat-c063c.appspot.com/o/assets%2Fuser.png?alt=media&token=a6fa6d73-3ac4-4e89-ad36-55904f4de284",e.prev=2,e.next=5,f.auth().createUserWithEmailAndPassword(n,r);case 5:(c=e.sent).user&&h.collection("users").doc(c.user.uid).set({displayName:a,photoURL:o,email:n,uid:c.user.uid,online:!0}),s({type:"AUTH_SUCCESS",payload:{displayName:a,email:n,photoURL:o,uid:c.user.id}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),s({type:"AUTH_ERROR"});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.prev=1,e.next=4,f.auth().signInWithEmailAndPassword(a,n);case 4:(r=e.sent).user&&h.collection("users").doc(r.user.uid).update({online:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new f.auth.GoogleAuthProvider,e.prev=1,e.next=4,f.auth().signInWithPopup(t);case 4:(a=e.sent).user&&h.collection("users").doc(a.user.uid).set({displayName:a.user.displayName,photoURL:a.user.photoURL,email:a.user.email,uid:a.user.uid,online:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.collection("users").doc(c.user.uid).update({online:!1});case 3:f.auth().signOut(),s({type:"SIGNOUT"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(b.Provider,{value:{isAuthenticated:c.isAuthenticated,user:c.user,loading:c.loading,signIn:i,signUp:l,signOut:g,authWithGoogle:p,authStateChangeHandler:function(){f.auth().onAuthStateChanged(function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r,o,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return e.next=3,h.collection("users").doc(t.uid).update({online:!0});case 3:return e.next=5,h.collection("users").doc(t.uid).get();case 5:a=e.sent,n=a.data(),r=n.displayName,o=n.email,c=n.photoURL,l=n.uid,s({type:"AUTH_SUCCESS",payload:{displayName:r,email:o,photoURL:c,uid:l}}),e.next=11;break;case 10:s({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},t)};a(84);c.a.render(r.a.createElement(Z,null,r.a.createElement(K,null)),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.675cfdc3.chunk.js.map